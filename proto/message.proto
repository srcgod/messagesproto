syntax = "proto3";

package message;
option go_package = "oneway/messages/v1;messagesv1";

import "google/protobuf/timestamp.proto";
import "google/protobuf/field_mask.proto";


service MessageService {
    rpc GetMessage (GetMessageRequest) returns (GetMessageResponse);
    rpc CreateMessage (CreateMessageRequest) returns (CreateMessageResponse);
    rpc DeleteMessage (DeleteMessageRequest) returns (DeleteMessageResponse);
    rpc UpdateMessage (UpdateMessageRequest) returns (UpdateMessageResponse);
    rpc ListMessage (ListMessageRequest) returns (ListMessageResponse);
    //rpc SearchMessage () returns ();  TODO!
}

message DeleteMessageResponse {}

message DeleteMessageRequest {
    string id = 1;
}

message UpdateMessageRequest {
    string id = 1;
    string content = 3;
    google.protobuf.FieldMask update_mask = 4;
}

message UpdateMessageResponse {
    Message msg = 1;
}

message ListMessageRequest {
    string chat_id = 1;
    int64 user_id = 2;
    int32 page_size = 3;
    optional string page_token = 4;
}

message ListMessageResponse {
    repeated Message msgs = 1;
    optional string next_page_token = 2;
}

message CreateMessageRequest {
    int64 user_id = 1;
    string content = 2;
    string chat_id = 3;
}
message CreateMessageResponse {
    Message msg = 1;
}

message GetMessageRequest {
    string id = 1;
}

message GetMessageResponse {
    Message msg = 1;
}

message Message {
  string id = 1;
  int64 user_id = 2;
  string content = 3;
  string chat_id = 6;
  google.protobuf.Timestamp created_at = 4;
  google.protobuf.Timestamp updated_at = 5;
}
